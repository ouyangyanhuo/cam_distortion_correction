# 摄像头标定和参数调整工具

这是一个基于WebUI的摄像头标定和参数调整工具，用于摄像头畸变校正和参数优化。项目使用Python作为后端，WebUI作为前端界面。

## 功能特性

- 加载ChArUco标定板 (A4纸张，DICT_4X4_1000字典，7×10棋盘格，25.0mm方格长度，17.5mm标记长度)
- 摄像头选择和管理
- 实时显示摄像头画面
- 调整摄像头参数（分辨率、帧率、曝光模式、曝光值等）
- 调节畸变矫正参数
- 执行摄像头标定
- 生成C++代码

## 系统要求

- Python 3.7+
- OpenCV
- Flask
- NumPy

## 安装依赖

```bash
pip install -r requirements.txt
```

## 启动应用

### Flask版本（推荐）

```bash
python app.py
```

应用将在 `http://127.0.0.1:5000` 上运行。

### Gradio版本

```bash
python main.py
```

应用将在 `http://127.0.0.1:7860` 上运行。

## 使用说明

1. **查看标定板**：左侧显示ChArUco标定板，可以打印出来用于标定
2. **选择摄像头**：从下拉菜单中选择要使用的摄像头
3. **启动摄像头**：点击"启动摄像头"按钮
4. **调整参数**：
   - 设置分辨率（宽度和高度）
   - 设置帧率
   - 选择曝光模式（自动或手动）
   - 如选择手动曝光，可调整曝光值
5. **更新参数**：点击"更新摄像头参数"按钮应用更改
6. **调节畸变参数**：在"畸变矫正参数"部分调整k1, k2, p1, p2, k3参数
7. **标定摄像头**：
   - 点击"捕获标定图像"按钮多次（建议至少3张，越多越好）
   - 确保标定板在不同角度和位置都被捕捉
   - 点击"执行标定"按钮完成标定
8. **生成C++代码**：标定完成后，点击"生成C++代码"获取可用于C++项目的标定参数

## 项目结构

```
fixCam/
├── app.py              # Flask主程序入口
├── main.py             # Gradio主程序入口
├── AI_Rule.md          # 项目开发基础规则
├── calibrator.py       # 摄像头标定类
├── ui.py              # Gradio界面（旧版）
├── templates/          # Flask模板目录
│   └── index.html     # Flask主页面
├── Charuco_A4.pdf     # 标定板PDF文件
├── requirements.txt    # 依赖库列表
└── README.md          # 说明文档
```

## 注意事项

- 标定需要使用提供的ChArUco标定板
- 捕获标定图像时，请从不同角度和位置拍摄标定板
- 确保标定板在画面中清晰可见
- 建议捕获至少10张以上不同角度的标定图像以获得更好的标定效果
- Flask版本提供更好的实时视频流体验