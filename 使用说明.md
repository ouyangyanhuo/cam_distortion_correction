# 摄像头标定工具 - 使用说明

## 📁 项目结构

```
fixCam/
├── app.py                      # 后端服务器入口
├── backend/                    # 后端模块
│   ├── camera.py
│   ├── board.py
│   └── calibration.py
├── frontend/                   # 前端文件（独立运行）
│   ├── index.html             # 双击打开使用
│   └── static/
│       ├── css/style.css
│       └── js/main.js
└── requirements.txt
```

## 🚀 使用方法

### 步骤 1: 安装依赖

```bash
pip install -r requirements.txt
```

### 步骤 2: 启动后端服务器

```bash
python app.py
```

你会看到：
```
============================================================
摄像头标定工具 - 后端 API 服务器
Camera Calibration Tool - Backend API Server
============================================================
后端服务启动中...
API 地址: http://127.0.0.1:5000
请双击打开 frontend/index.html 使用前端界面
------------------------------------------------------------
Starting backend API server...
API URL: http://127.0.0.1:5000
Please double-click frontend/index.html to open the UI
============================================================
```

### 步骤 3: 打开前端界面

**直接双击** `frontend/index.html` 文件，会在浏览器中打开。

或者在浏览器中输入文件路径：
```
file:///F:/Project/YOLO/fixCam/frontend/index.html
```

## ✅ 架构说明

### 前后端分离架构

- **后端 (Backend)**: 纯 API 服务器，端口 5000
  - 不渲染页面
  - 只提供 REST API 和视频流
  - 使用 Flask + CORS

- **前端 (Frontend)**: 独立的 HTML 页面
  - 可直接用浏览器打开
  - 通过 JavaScript 调用后端 API
  - 中文界面

### API 配置

前端 JavaScript 中的 API 地址：
```javascript
const API_BASE_URL = 'http://127.0.0.1:5000';
```

如果后端端口更改，请修改 `frontend/static/js/main.js` 第 4 行。

## 🔌 API 端点

| 方法 | 端点 | 说明 |
|------|------|------|
| GET | `/api/cameras` | 获取摄像头列表 |
| POST | `/api/start_camera` | 启动摄像头 |
| POST | `/api/update_params` | 更新摄像头参数 |
| POST | `/api/set_board_type` | 设置标定板类型 |
| GET | `/api/board_image` | 获取标定板图像 |
| POST | `/api/capture_image` | 捕获标定图像 |
| POST | `/api/calibrate` | 执行标定 |
| POST | `/api/save_calibration` | 保存到 YAML |
| GET | `/api/generate_cpp` | 生成 C++ 代码 |
| GET | `/video_feed` | MJPEG 视频流 |

## 📋 依赖项

```
opencv-python>=4.5.0
opencv-contrib-python>=4.5.0
numpy>=1.21.0
Flask>=2.0.0
Flask-CORS>=3.0.10
```

## 🔧 注意事项

1. **必须先启动后端**：双击 `index.html` 前，确保 `python app.py` 在运行
2. **CORS 已启用**：后端允许所有来源的跨域请求
3. **浏览器兼容性**：建议使用 Chrome/Edge/Firefox 最新版本
4. **中文界面**：所有文本已翻译为中文

## 🎯 优势

✅ **前后端分离**：可以独立开发和部署
✅ **简单启动**：后端 `python app.py`，前端双击 HTML
✅ **无需构建**：前端是纯 HTML/CSS/JS，无需编译
✅ **中文友好**：界面全中文
✅ **跨域支持**：CORS 配置完善

## 📝 开发说明

### 修改后端 API

编辑 `app.py` 或 `backend/` 下的模块文件，重启 `python app.py`。

### 修改前端界面

编辑 `frontend/` 下的文件：
- `index.html` - 页面结构
- `static/css/style.css` - 样式
- `static/js/main.js` - 逻辑

刷新浏览器即可看到更改（无需重启后端）。

---

**状态**: ✅ 前后端完全分离，可独立运行
